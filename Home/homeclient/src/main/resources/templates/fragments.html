<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html" lang="de">

	<head><title></title></head>

	<!-- Titel -->
	<div class="placeTitle" th:fragment="title (name)" th:assert="${!#strings.isEmpty(name)}">
		<h4 style="font-weight: 400 !important; font-size: 1.3rem; margin-top: 10px; letter-spacing: 3px !important;">
			<span th:text="${name}">Name</span>
		</h4>
	</div>
	
	<!-- ElementName -->
	<div th:fragment="elementname (icon, name, place, unreach)">
		<div>
			<a>
				<span th:if="${!#strings.isEmpty(icon)}"><th:block th:replace="~{basics :: symbol (name=${icon})}"/></span>
				<span th:text="${name}"></span>
				<span th:if="${#strings.startsWith(unreach, 'true')}" class="text-danger">&nbsp;- Aktualisierung ausstehend</span>
			</a>
		</div>
	</div>	
	
	<!-- Collapsable ElementName -->
	<div th:fragment="elementnameCollapsable (icon, name, place, unreach, collapseLink, elementTitleState, colorClass)" data-bs-toggle="collapse" th:data-bs-target="'#' + ${collapseLink}" aria-expanded="false" th:aria-controls="${collapseLink}">
		<div style="float:right; position:relative; padding-right: 10px; padding-left: 0px; padding-bottom: 0px;">
			<a>
				<span th:if="${!#strings.startsWith(unreach, 'true')}" th:id="${collapseLink} + 'ElementTitleState'" th:text="${elementTitleState}"></span>
				<span th:if="${!#strings.isEmpty(collapseLink)}" style="display:inline; padding-left: 8px;" th:id="${collapseLink} + 'SymbolDown'">
					<th:block th:replace="~{basics :: symbol (name='fas fa-chevron-circle-down')}"/>
				</span>
				<span th:if="${!#strings.isEmpty(collapseLink)}" style="display:none; padding-left: 8px;" th:id="${collapseLink} + 'SymbolUp'">
					<th:block th:replace="~{basics :: symbol (name='fas fa-chevron-circle-up')}"/>
				</span>
			</a>			
		</div>		
		<div>
			<a>
				<span th:unless="${#strings.endsWith(icon, '.png')}">
					<th:block th:replace="~{basics :: symbol (name=${icon})}"/>
					<span th:utext="'&hairsp;'"></span>
				</span>
				<span th:if="${#strings.endsWith(icon, '.png')}">
					<div th:style="'mask:url(' + ${icon} + ') center/contain; mask-repeat: no-repeat; mask-size: contain;'" th:class="'img-icon img-' + ${colorClass}"></div>
					<span th:utext="'&nbsp;'"></span>
				</span>
				<span th:text="${name}"></span>
				<span th:if="${#strings.startsWith(unreach, 'true')}" class="text-danger">&nbsp;- Aktualisierung ausstehend</span>
			</a>
			<input type="hidden" th:id="'val_ElementTitleState_' + ${collapseLink}" th:value="${elementTitleState}">
		</div>
	</div>

	<!-- WindowSensor -->
	<div th:fragment="windowsensor (model)" th:class="'alert alert-secondary callout callout-' + ${model.colorClass}">
		<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name=${model.name}, place=${model.place}, unreach=${model.unreach}, collapseLink='collapse' + ${model.id}, elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
		<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id}">
			<h4><span th:text="${model.state}"></span><span th:text="${model.stateSuffix}" style="font-size: 80%;"></span></h4>
		</div>
	</div>

	<!-- Switch -->
	<div th:fragment="switch (model)" th:class="'alert alert-secondary callout callout-' + ${model.colorClass}">
		<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name=${model.name}, place=${model.place}, unreach=${model.unreach}, collapseLink='collapse' + ${model.id}, elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
		<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id}">
			<h4><span th:text="${model.state}"></span><span th:text="${model.stateSuffix}" style="font-size: 80%;"></span></h4>
			<div th:replace="~{fragments-switchControls :: switchControls (model=${model})}"></div>
		</div>
	</div>

	<!-- wallbox-->
	<div th:fragment="wallbox (modelMeter, modelSwitch)" th:class="'alert alert-' + ${modelSwitch.colorClass} + ' callout callout-' + ${modelSwitch.colorClass}">
		<div th:replace="~{fragments :: elementnameCollapsable (icon=${modelMeter.icon}, name=${modelMeter.place}, place='', unreach=${modelSwitch.unreach}, collapseLink='collapse' + ${modelSwitch.id}, elementTitleState=${modelMeter.elementTitleState} + ', ' + ${modelSwitch.elementTitleState.toLowerCase()}, colorClass=${modelMeter.colorClass})}"></div>
		<div class="collapse collapse-preserve-state" th:id="'collapse' + ${modelSwitch.id}">
			<th:block th:unless="${#strings.equals(modelSwitch.unreach, 'true')}">
				<h4>
					<span th:text="${modelMeter.state}"></span>
					<th:block th:replace="~{fragments :: tendency (icon=${modelMeter.tendencyIcon})}"></th:block>
					<th:block th:if="${modelMeter.todayConsumption != null}">
						<span th:utext="'&nbsp;&ndash;&nbsp;'"></span>
						<span class="mb-1" th:text="${modelMeter.todayConsumption.label}">Gestern</span>
						<span class="text-muted" style="font-size: 80%;" th:text="${modelMeter.todayConsumption.additionalLabel}">Summe</span>
						<th:block th:replace="~{fragments :: historyLink (key=${modelMeter.historyKey}, name=${modelMeter.name}, place=${modelMeter.place})}"></th:block>
					</th:block>
				</h4>
				<h4><span th:text="${modelSwitch.state}"></span><span th:text="${modelSwitch.stateSuffix}" style="font-size: 80%;"></span></h4>
				<div th:replace="~{fragments-switchControls :: switchControls (model=${modelSwitch})}"></div>
				<div style="display: block; height: 10px;"></div>
				<div class="btn-group" role="group" aria-label="evs">
					<th:block th:each="ev : ${modelSwitch.evs}">
						<button type="button" th:class="${#strings.startsWith(ev.link, '#')} ? 'btn btn-dark btn-sm' : 'btn btn-secondary btn-sm'" th:onclick="@{'evselect' + '(\'' + ${ev.link} + '\')'}">
							<span th:class="${#strings.startsWith(ev.link, '#')} ? 'text-' + ${ev.activeSwitchColorClass}"th:text="${ev.caption}"></span>
						</button>
					</th:block>
				</div>
				<script type="text/javascript">
					function evselect(link){
						if(!link.startsWith('#')){
							submitContent(link);
						}
					}
				</script>
			</th:block>
		</div>
	</div>
	
	<!-- Window -->
	<div th:fragment="window (model)" th:class="'alert alert-secondary callout callout-secondary'">
		<div th:replace="~{fragments :: elementname (icon=${model.icon}, name=${model.name}, place=${model.place}, unreach=${model.unreach})}"></div>
		<h4><span th:text="${model.state}"></span><span th:text="${model.stateSuffix}" style="font-size: 80%;"></span></h4>
		
		<th:block th:unless="${#strings.equals(model.unreach, 'true')}">
			<div class="btn-group" role="group" aria-label="shutterControl">
	  			<button th:if="${#strings.startsWith(model.linkOpen, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name=${model.iconOpen})}"/></span><span>&nbsp;</span></button>
	  			<button th:if="${#strings.startsWith(model.linkOpen, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'openShutter' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name=${model.iconOpen})}"/></span><span>&nbsp;</span></button>
				<button th:if="${#strings.startsWith(model.linkHalf, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name=${model.iconHalf})}"/></span><span>&nbsp;</span></button>
	  			<button th:if="${#strings.startsWith(model.linkHalf, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'halfShutter' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name=${model.iconHalf})}"/></span><span>&nbsp;</span></button>
	  			<button th:if="${#strings.startsWith(model.linkSunshade, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name=${model.iconSUnshade})}"/></span><span>&nbsp;</span></button>
	  			<button th:if="${#strings.startsWith(model.linkSunshade, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'sunshadeShutter' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name=${model.iconSunshade})}"/></span><span>&nbsp;</span></button>
	  			<button th:if="${#strings.startsWith(model.linkClose, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name=${model.iconClose})}"/></span><span>&nbsp;</span></button>
	  			<button th:if="${#strings.startsWith(model.linkClose, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'closeShutter' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name=${model.iconClose})}"/></span><span>&nbsp;</span></button>
			</div>		
			
			<input type="hidden" th:id="'val_model_linkOpen_' + ${model.id}" th:value="${model.linkOpen}">
			<input type="hidden" th:id="'val_model_linkClose_' + ${model.id}" th:value="${model.linkClose}">
			<input type="hidden" th:id="'val_model_linkHalf_' + ${model.id}" th:value="${model.linkHalf}">
			<input type="hidden" th:id="'val_model_linkSunshade_' + ${model.id}" th:value="${model.linkSunshade}">
			<script type="text/javascript">
				function openShutter[[${model.id}]](){
					submitContent(document.getElementById('val_model_linkOpen_[[${model.id}]]').value);
				}
				function closeShutter[[${model.id}]](){
					submitContent(document.getElementById('val_model_linkClose_[[${model.id}]]').value);
				}
				function halfShutter[[${model.id}]](){
					submitContent(document.getElementById('val_model_linkHalf_[[${model.id}]]').value);
				}			
				function sunshadeShutter[[${model.id}]](){
					submitContent(document.getElementById('val_model_linkSunshade_[[${model.id}]]').value);
				}			
			</script>
			
			<th:block th:if="${!#strings.startsWith(model.linkAuto, '#') or !#strings.startsWith(model.linkManual, '#')}">
				<span>&nbsp;</span>
				<div class="btn-group" role="group" aria-label="shutterMode">
		  			<button th:if="${#strings.startsWith(model.linkAuto, '#')}" type="button" class="btn btn-success btn-sm"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-cogs')}"/></span><span>&nbsp;</span></button>
		  			<button th:if="${#strings.startsWith(model.linkAuto, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'toggleShutterToManual' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-cogs')}"/></span><span>&nbsp;</span></button>
		  			<button th:if="${#strings.startsWith(model.linkManual, '#')}" type="button" class="btn btn-success btn-sm"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-hand-paper')}"/></span><span>&nbsp;</span></button>
		  			<button th:if="${#strings.startsWith(model.linkManual, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'toggleShutterToAuto' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-hand-paper')}"/></span><span>&nbsp;</span></button>
				</div>
				<input type="hidden" th:id="'val_model_linkManual_' + ${model.id}" th:value="${model.linkManual}">
				<input type="hidden" th:id="'val_model_linkAuto_' + ${model.id}" th:value="${model.linkAuto}">
	  			<script type="text/javascript">
					function toggleShutterToAuto[[${model.id}]](){
						submitContent(document.getElementById('val_model_linkManual_[[${model.id}]]').value);
					}
					function toggleShutterToManual[[${model.id}]](){
						submitContent(document.getElementById('val_model_linkAuto_[[${model.id}]]').value);
					}					
				</script>
					<button type="button" class="btn btn-link" data-bs-toggle="modal" th:data-bs-target="'#modalAuto' + ${model.id}">
						<span 
							class="badge badge-secondary" th:text="'?'">
						</span>
					</button>
					<!-- Modal -->
					<div class="modal fade" th:id="'modalAuto' + ${model.id}" tabindex="-1" role="dialog" th:aria-labelledby="'#modalAutoLabel' + ${model.id}" aria-hidden="true">
					  <div class="modal-dialog modal-dialog-centered" role="document">
					    <div class="modal-content">
					      <div class="modal-header">
					        <h5 class="modal-title" id="exampleModalLongTitle" th:text="'Automatik: ' + ${model.name}"></h5>
							  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
								  <span class="text-secondary" aria-hidden="true">&times;</span>
							  </button>
					      </div>
					      <div class="modal-body"><a th:utext="${model.autoInfoText}"></a></div>
					    </div>
					  </div>
					</div>
			</th:block>
		</th:block>
	</div>	

	<!-- Frontdoor -->
	<th:block th:fragment="frontDoor (model)">
		<div th:class="'alert alert-' + ${model.colorClass} + ' callout callout-' + ${model.colorClass}">
			<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name='Türklingel', place='', unreach=${model.unreach}, collapseLink='collapse' + ${model.id}, elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
			<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id}">
				<h4>
					<span th:text="${model.lastDoorbells}"></span>
				</h4>
			</div>		
		</div>
	</th:block>
	
	<!-- Front door lock -->
	<div th:fragment="doorLock (model)" th:class="'alert alert-' + ${model.colorClass} + ' callout callout-' + ${model.colorClass}">
		<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name=${model.name}, place=${model.place}, unreach=${model.unreach}, collapseLink='collapse' + ${model.id}, elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
		<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id}">
				<h4 th:unless="${#strings.equals(model.busy,'true')}"><span id="frontdoorlockState" th:text="${model.state}"></span><span th:text="${model.stateSuffix}" style="font-size: 80%;"></span></h4>
				<th:block th:unless="${#strings.equals(model.busy,'true')}">	
					<div class="btn-group" role="group" aria-label="lockcontrol">
			  			<button th:if="${#strings.startsWith(model.linkLock, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span th:class="'text-' + ${model.colorClass}"><th:block th:replace="~{basics :: symbol (name='fas fa-lock')}"/></span><span>&nbsp;</span></button>
			  			<button th:if="${#strings.startsWith(model.linkLock, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'openPin' + '(lockModalLabel' + ${model.id} + ', lock' + ${model.id} + ')'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-lock')}"/></span><span>&nbsp;</span></button>
			  			<button th:if="${#strings.startsWith(model.linkUnlock, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span th:class="'text-' + ${model.colorClass}"><th:block th:replace="~{basics :: symbol (name='fas fa-lock-open')}"/></span><span>&nbsp;</span></button>
			  			<button th:if="${#strings.startsWith(model.linkUnlock, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'openPin' + '(unlockModalLabel' + ${model.id} + ', unlock' + ${model.id} + ')'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-lock-open')}"/></span><span>&nbsp;</span></button>
			  			<button th:if="${#strings.startsWith(model.linkOpen, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span th:class="'text-' + ${model.colorClass}"><th:block th:replace="~{basics :: symbol (name='fas fa-door-open')}"/></span><span>&nbsp;</span></button>
			  			<button th:if="${#strings.startsWith(model.linkOpen, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'openPin' + '(openModalLabel' + ${model.id} + ', open' + ${model.id} + ')'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-door-open')}"/></span><span>&nbsp;</span></button>
						<!-- <button type="button" class="btn btn-secondary btn-sm" th:onclick="@{'openPin(lockTestLabel, testPin)'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fa-regular fa-circle-question')}"/></span><span>&nbsp;</span></button> -->
					</div>
				</th:block>
			<input type="hidden" th:id="'val_model_linkLock_' + ${model.id}" th:value="${model.linkLock}">
			<input type="hidden" th:id="'val_model_linkUnlock_' + ${model.id}" th:value="${model.linkUnlock}">
			<input type="hidden" th:id="'val_model_linkOpen_' + ${model.id}" th:value="${model.linkOpen}">
	 		<script type="text/javascript">
				function testPin(){
					document.getElementById('frontdoorlockState').innerHTML = document.getElementById('val_pin').value + ' / ' + new Date().toLocaleTimeString();
				}
				function lockTestLabel(){
					return 'TEST';
				}
				function lockModalLabel[[${model.id}]](){
					return '[[${model.caption}]] verriegeln';
				}
				function unlockModalLabel[[${model.id}]](){
					return '[[${model.caption}]] entriegeln';
				}	
				function openModalLabel[[${model.id}]](){
					return '[[${model.caption}]] öffnen';
				} 		
				function lock[[${model.id}]](){
					submitContentWithPin(document.getElementById('val_model_linkLock_[[${model.id}]]').value, document.getElementById('val_pin').value);
				}
				function unlock[[${model.id}]](){
					submitContentWithPin(document.getElementById('val_model_linkUnlock_[[${model.id}]]').value, document.getElementById('val_pin').value);
				}	
				function open[[${model.id}]](){
					submitContentWithPin(document.getElementById('val_model_linkOpen_[[${model.id}]]').value, document.getElementById('val_pin').value);
				}			
			</script>		
			
			<span th:unless="${#strings.equals(model.unreach,'true')}">&nbsp;</span>
			<th:block th:unless="${#strings.equals(model.busy,'true') or #strings.equals(model.unreach,'true')}">
				<div class="btn-group" role="group" aria-label="lockauto">
		  			<button th:if="${#strings.startsWith(model.linkAutoEvent, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span th:class="'text-' + ${model.colorClass}"><th:block th:replace="~{basics :: symbol (name='fas fa-bell')}"/></span><span>&nbsp;</span></button>
		  			<button th:if="${#strings.startsWith(model.linkAutoEvent, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'toggleToAutoEvent' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-bell')}"/></span><span>&nbsp;</span></button>
		  			<button th:if="${#strings.startsWith(model.linkAuto, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span th:class="'text-' + ${model.colorClass}"><th:block th:replace="~{basics :: symbol (name='fas fa-cogs')}"/></span><span>&nbsp;</span></button>
		  			<button th:if="${#strings.startsWith(model.linkAuto, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'toggleToAuto' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-cogs')}"/></span><span>&nbsp;</span></button>
		  			<button th:if="${#strings.startsWith(model.linkManual, '#')}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span th:class="'text-' + ${model.colorClass}"><th:block th:replace="~{basics :: symbol (name='fas fa-hand-paper')}"/></span><span>&nbsp;</span></button>
		  			<button th:if="${#strings.startsWith(model.linkManual, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'toggleToManual' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-hand-paper')}"/></span><span>&nbsp;</span></button>
				</div>
				<input type="hidden" th:id="'val_model_linkManual_' + ${model.id}" th:value="${model.linkManual}">
				<input type="hidden" th:id="'val_model_linkAuto_' + ${model.id}" th:value="${model.linkAuto}">
				<input type="hidden" th:id="'val_model_linkAutoEvent_' + ${model.id}" th:value="${model.linkAutoEvent}">
	  			<script type="text/javascript">
					function toggleToAutoEvent[[${model.id}]](){
						submitContent(document.getElementById('val_model_linkAutoEvent_[[${model.id}]]').value);
					}  			
					function toggleToAuto[[${model.id}]](){
						submitContent(document.getElementById('val_model_linkAuto_[[${model.id}]]').value);
					}
					function toggleToManual[[${model.id}]](){
						submitContent(document.getElementById('val_model_linkManual_[[${model.id}]]').value);
					}	
				</script>
				<button type="button" class="btn btn-link" data-bs-toggle="modal" th:data-bs-target="'#modalAuto' + ${model.id}">
					<span 
						class="badge badge-secondary" th:text="'?'">
					</span>
				</button>
				<!-- Modal -->
				<div class="modal fade" th:id="'modalAuto' + ${model.id}" tabindex="-1" role="dialog" th:aria-labelledby="'#modalAutoLabel' + ${model.id}" aria-hidden="true">
				  <div class="modal-dialog modal-dialog-centered" role="document">
				    <div class="modal-content">
				      <div class="modal-header">
				        <h5 class="modal-title" th:text="'Automatik: ' + ${model.name}"></h5>
						  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
							  <span class="text-secondary" aria-hidden="true">&times;</span>
						  </button>
				      </div>
				      <div class="modal-body"><a th:utext="${model.autoInfoText}"></a></div>
				    </div>
				  </div>
				</div>
			</th:block>
			
			<th:block th:if="${#strings.equals(model.busy,'true')}">
				<h4><span><th:block th:replace="~{basics :: symbol (name='fa fa-spinner fa-spin')}"/></span></h4>
			</th:block>
		</div>
		<div th:replace="~{pin :: pinView}"></div>
	</div>	
	
	<!-- Actual Power Consumption -->
	<div th:fragment="actualPowerConsumption (model)" th:class="'alert alert-' + ${model.colorClass} + ' callout callout-' + ${model.colorClass}">
		<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name=${model.name}, place=${model.place}, unreach=${model.unreach}, collapseLink='collapse' + ${model.id}, elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
		<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id}">
			<h4>
				<span th:text="${model.state}"></span>
				<th:block th:replace="~{fragments :: tendency (icon=${model.tendencyIcon})}"></th:block>
				<th:block th:if="${model.todayConsumption != null}">
					<span th:utext="'&nbsp;&ndash;&nbsp;'"></span>
					<span class="mb-1" th:text="${model.todayConsumption.label}">Gestern</span>
					<span class="text-muted" style="font-size: 80%;" th:text="${model.todayConsumption.additionalLabel}">Summe</span>
				</th:block>
				<th:block th:replace="~{fragments :: historyLink (key=${model.historyKey}, name=${model.name} + ' Gesamt', place=${model.place})}"></th:block>
			</h4>
			<th:block th:if="${model.todayConsumption != null}">
				<div style="max-width:80%;">
					<div style="max-width:400px;">
						<div th:replace="~{fragments :: chartEntry (chart=${model.todayConsumption}, showCaption='false')}"></div>
					</div>
				</div>
			</th:block>
		</div>
	</div>	
	
	<!-- History link -->
	<th:block th:fragment="historyLink (key, name, place)">
		<th:block th:if="${!#strings.isEmpty(key)}">
			<span th:utext="'&hairsp;'"></span>
			<span th:onclick="@{'openHistory(\'' + ${key} + '\')'}">
				<th:block th:replace="~{basics :: symbolWithStyle (name='fas fa-history', style='font-size: 80%;')}"/>
			</span>
			<div class="modal fade" th:id="'modalHistory' + ${key}" tabindex="-1" role="dialog" th:aria-labelledby="'#modalCamera' + ${key}" aria-hidden="true">
			  <div class="modal-dialog modal-dialog-centered" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title text-dark" th:id="'modalHistoryId' + ${key}" th:text="${name} + ' ' + ${place}"></h5>
			        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
						<span class="text-secondary" aria-hidden="true">&times;</span>
			        </button>
			      </div>
			      <div th:id="'modalHistoryBody' + ${key}" class="modal-body" style="max-height: calc(100vh - 200px); overflow-y: auto;"></div>
			    </div>
			  </div>
			</div>
		</th:block>
	</th:block>		
	
	<!-- Tendency icon -->
	<th:block th:fragment="tendency (icon)">
	     <span th:if="${!#strings.isEmpty(icon)}"><th:block th:replace="~{basics :: symbolWithStyle (name=${icon}, style='font-size: 80%;')}"/></span>
	</th:block>

	<!-- Temperature -->
	<div th:fragment="temperature (model)" th:class="'alert alert-' + ${model.colorClass} + ' callout callout-' + ${model.colorClass}">
		<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name='Temperatur' + ${model.postfix}, place=${model.place}, unreach=${model.unreach}, collapseLink='collapse' + ${model.id}, elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
		<th:block th:unless="${#strings.equals(model.unreach,'true')}">
			<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id}">
				<h4 th:if="${!#strings.isEmpty(model.stateSecondLine)}" th:utext="${model.stateSecondLine}"></h4>
				<h4>
					<span th:if="${!#strings.isEmpty(model.stateTemperature)}" th:text="${model.stateTemperature}"></span>
					<th:block th:replace="~{fragments :: tendency (icon=${model.tendencyIconTemperature})}"></th:block>
					<span th:if="${!#strings.isEmpty(model.statePostfixIconTemperature)}"><th:block th:replace="~{basics :: symbol (name=${model.statePostfixIconTemperature})}"/></span>
					<span th:if="${!#strings.isEmpty(model.stateHumidity)}" th:utext="'&nbsp;&ndash;&nbsp;'"></span>
					<span th:if="${!#strings.isEmpty(model.stateHumidity)}" th:text="${model.stateHumidity}"></span>
					<th:block th:replace="~{fragments :: tendency (icon=${model.tendencyIconHumidity})}"></th:block>
					<span th:if="${!#strings.isEmpty(model.statePostfixIconHumidity)}"><th:block th:replace="~{basics :: symbol (name=${model.statePostfixIconHumidity})}"/></span>
					<span th:if="${!#strings.isEmpty(model.absoluteHumidityIcon)}" th:utext="'&hairsp;'"></span>
					<span onclick="$('#idDropSymbolMessage').modal();" th:if="${!#strings.isEmpty(model.absoluteHumidityIcon)}"><th:block th:replace="~{fragments :: tendency (icon=${model.absoluteHumidityIcon})}"/></span>
					<th:block th:replace="~{fragments :: historyLink (key=${model.historyKey}, name='Temperatur' + ${model.postfix}, place=${model.place})}"></th:block>
				</h4>
					
				<th:block th:each="hint : ${model.hints}">
					<div>
						<a th:class="'font-weight-light'" style="font-size: 85%; margin-right:10px;">
							<span th:if="${#strings.startsWith(hint,'ggf')}"><th:block th:replace="~{basics :: symbol (name='far fa-hand-point-right')}"/></span>
							<span th:unless="${#strings.startsWith(hint,'ggf')}"><th:block th:replace="~{basics :: symbol (name='fas fa-hand-point-right')}"/></span>
							<span th:text="${hint}">hint</span>
						</a>
					</div>
				</th:block>
			</div>
		</th:block>
	</div>
	
	<!-- Thermostat -->
	<div th:fragment="thermostat (model)" th:class="'alert alert-' + ${model.colorClassHeating} + ' callout callout-' + ${model.colorClassHeating}">

		<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.heatericon}, name='Heizkörper', place=${model.place}, unreach=${model.unreach}, collapseLink='collapse' + ${model.id} + 'Thermostat', elementTitleState=${model.heaterElementTitleState}, colorClass=${model.colorClass})}"></div>

		<th:block th:if="${#strings.equals(model.busy,'true')}">
			<h4><span><th:block th:replace="~{basics :: symbol (name='fa fa-spinner fa-spin')}"/></span></h4>
		</th:block>

		<th:block th:unless="${#strings.equals(model.busy,'true') or #strings.equals(model.unreach,'true')}">
			<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id} + 'Thermostat'">

				<h4 th:if="${#strings.isEmpty(model.linkManual)}"><span th:text="'Manuell auf ' + ${model.targetTemp} + '°C'"></span></h4>
				<h4 th:if="${#strings.isEmpty(model.linkAuto)}"><span th:text="'Automatisch auf ' + ${model.targetTemp} + '°C'"></span></h4>
				<h4 th:if="${#strings.isEmpty(model.linkBoost)}"><span th:text="'Aufheizen - noch ' + ${model.boostTimeLeft} + ' Min.'"></span></h4>

				<div class="btn-group" role="group" aria-label="thermostat">
					<button th:if="${#strings.isEmpty(model.linkManual)}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span th:class="'text-' + ${model.activeSwitchColorClass}"><th:block th:replace="~{basics :: symbol (name='fas fa-hand-paper')}"/></span><span>&nbsp;</span></button>
					<button th:if="${#strings.startsWith(model.linkManual, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'toggleToManual' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-hand-paper')}"/></span><span>&nbsp;</span></button>
					<button th:if="${#strings.isEmpty(model.linkAuto)}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span th:class="'text-' + ${model.activeSwitchColorClass}"><th:block th:replace="~{basics :: symbol (name='fas fa-cogs')}"/></span><span>&nbsp;</span></button>
					<button th:if="${#strings.startsWith(model.linkAuto, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'toggleToAuto' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-cogs')}"/></span><span>&nbsp;</span></button>
					<button th:if="${#strings.isEmpty(model.linkBoost)}" type="button" class="btn btn-dark btn-sm"><span>&nbsp;</span><span th:class="'text-' + ${model.activeSwitchColorClass}"><th:block th:replace="~{basics :: symbol (name='fas fa-thermometer-full')}"/></span><span>&nbsp;</span></button>
					<button th:if="${#strings.startsWith(model.linkBoost, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'toggleToBoost' + ${model.id} + '()'}"><span>&nbsp;</span><span><th:block th:replace="~{basics :: symbol (name='fas fa-thermometer-full')}"/></span><span>&nbsp;</span></button>
				</div>

				<input type="hidden" th:id="'val_model_targetTemp_' + ${model.id}" th:value="${model.targetTemp}">
				<input type="hidden" th:id="'val_model_linkManual_' + ${model.id}" th:value="${model.linkManual}">
				<input type="hidden" th:id="'val_model_linkAuto_' + ${model.id}" th:value="${model.linkAuto}">
				<input type="hidden" th:id="'val_model_linkBoost_' + ${model.id}" th:value="${model.linkBoost}">
				<input type="hidden" th:id="'val_model_linkAdjustTemperature_' + ${model.id}" th:value="${model.linkAdjustTemperature}">

				<th:block th:if="${#strings.isEmpty(model.linkManual)}">
					<span>&nbsp;</span>
					<div class="btn-group" role="group" aria-label="heating">
						<button type="button" th:id="'idHeatMinus' + ${model.id}" class="btn btn-secondary btn-sm" th:onclick="@{'adjustHeating' + ${model.id} + '(-0.5)'}">&nbsp;-&nbsp;</button>
						<button type="button" th:id="'idHeatTarget' + ${model.id}" class="btn btn-outline-secondary btn-sm text-light" disabled><span th:id="'idHeatTargetLabel' + ${model.id}" th:text="${model.targetTemp}"></span><span>°C</span></button>
						<button type="button" th:id="'idHeatPlus' + ${model.id}" class="btn btn-secondary btn-sm" th:onclick="@{'adjustHeating' + ${model.id} + '(+0.5)'}">&nbsp;+&nbsp;</button>
					</div>
				</th:block>
			</div>
		</th:block>
		<script type="text/javascript" th:unless="${#strings.equals(model.unreach,'true')}">
			var timeout[[${model.id}]] = null;
			var newTargetTemp[[${model.id}]] = parseFloat(document.getElementById('val_model_targetTemp_[[${model.id}]]').value.replace(/,/, '.'));
			function adjustHeating[[${model.id}]](diff){
				if(timeout[[${model.id}]]){
					clearTimeout(timeout[[${model.id}]]);
				}
				newTargetTemp[[${model.id}]] = newTargetTemp[[${model.id}]] + diff;
				document.getElementById("idHeatTarget[[${model.id}]]").className = "btn btn-danger btn-sm";
				document.getElementById("idHeatTargetLabel[[${model.id}]]").innerHTML = newTargetTemp[[${model.id}]].toFixed(1).replace('.', ',');
				timeout[[${model.id}]] = setTimeout(adjustTemperature[[${model.id}]], 1000 * 1.5);
			}

			function adjustTemperature[[${model.id}]](){
				submitContent(document.getElementById('val_model_linkAdjustTemperature_[[${model.id}]]').value + "&value=" + newTargetTemp[[${model.id}]]);
			}
			function toggleToManual[[${model.id}]](){
				submitContent(document.getElementById('val_model_linkManual_[[${model.id}]]').value + "&value=" + newTargetTemp[[${model.id}]]);
			}
			function toggleToAuto[[${model.id}]](){
				submitContent(document.getElementById('val_model_linkAuto_[[${model.id}]]').value);
			}
			function toggleToBoost[[${model.id}]](){
				submitContent(document.getElementById('val_model_linkBoost_[[${model.id}]]').value);
			}
		</script>
	</div>	

	<!-- Sonne -->
	<div th:fragment="sunStatus (model)" th:if="${!#strings.isEmpty(model.stateTemperature)}" th:class="'alert alert-' + ${model.colorClass} + ' callout callout-' + ${model.colorClass}">
		<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name=${model.name}, place=${model.place}, unreach=${model.unreach}, collapseLink='', elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
	</div>

	<!-- Licht -->
	<th:block th:fragment="lights (model)">
		<th:block th:if="${#lists.size(model.lights) &gt; 0}">
			<div th:class="'alert alert-secondary callout callout-' + ${model.colorClass}">
				<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name=${model.name}, place=${model.place}, unreach=${model.unreach}, collapseLink='collapse' + ${model.id}, elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
				<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id}">
					<h4 th:text="${model.state}"></h4>
					<div class="d-flex flex-wrap">
						<th:block th:each="entry : ${model.lights}">
							<div  style="margin-top: 3px; margin-bottom: 2px; margin-right: 12px;">
								<!-- is ON -->
							    <button th:if="${#strings.startsWith(entry.linkOn, '#') and #strings.startsWith(entry.linkOff, '/')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'lightOff' + ${entry.id} + '()'}"><span th:class="'text-' + ${entry.colorClass}" th:text="${entry.name}"></span></button>
							    <!-- is OFF (STANDBY) -->
							    <button th:if="${#strings.startsWith(entry.linkOn, '/') and #strings.startsWith(entry.linkOff, '#')}" type="button" class="btn btn-secondary btn-sm" th:onclick="@{'lightOn' + ${entry.id} + '()'}"><span th:text="${entry.name}"></span></button>
							    <!-- is OFF BY SWITCH -->
							    <button th:if="${#strings.startsWith(entry.linkOn, '#') and #strings.startsWith(entry.linkOff, '#')}" type="button" class="btn btn-outline-secondary btn-sm" disabled><span class="text-light" th:text="${entry.name}"></span></button>
							    <!-- VARS / SCRIPTS -->
								<input type="hidden" th:id="'val_model_lightOn_' + ${entry.id}" th:value="${entry.linkOn}">
								<input type="hidden" th:id="'val_model_lightOff_' + ${entry.id}" th:value="${entry.linkOff}">
						 		<script type="text/javascript">
									function lightOn[[${entry.id}]](){
										submitContent(document.getElementById('val_model_lightOn_[[${entry.id}]]').value);
									}
									function lightOff[[${entry.id}]](){
										submitContent(document.getElementById('val_model_lightOff_[[${entry.id}]]').value);
									}
								</script>
							</div>
						</th:block>
					</div>
				</div>
			</div>
		</th:block>
	</th:block>

	<!-- PushBenachrichtigungen -->
	<th:block th:fragment="pushMessages (model)">
		<th:block th:if="${#lists.size(model) &gt; 0}">
			<div th:replace="~{fragments :: title (name='Push-Benachrichtigungen')}"></div>
		</th:block>
		<th:block th:each="entry : ${model}">
			<div th:class="'alert alert-dark callout callout-dark classHomeWarning'">
				<h5 class="card-title"><span><th:block th:replace="~{basics :: symbol (name='fa-regular fa-envelope')}"/></span> <span th:text="${entry.title}"></span></h5>
				<h6 class="card-subtitle mb-2 text-muted" th:text="${entry.timestamp}"></h6>
				<p class="card-text" th:text="${entry.message}"></p>
			</div>
		</th:block>
	</th:block>

	<!-- AllgemeineWarnung -->
	<th:block th:fragment="generalWarning (model)">
		<th:block th:if="${#lists.size(model) &gt; 0}">
			<div th:replace="~{fragments :: title (name='Achtung!')}"></div>
		</th:block>
		<th:block th:each="entry : ${model}">
			<div th:class="'alert alert-danger callout callout-danger classHomeWarning'">
				<h4>
					<span><th:block th:replace="~{basics :: symbol (name='fas fa-exclamation-triangle')}"/></span> <span th:text="${entry}"></span>
				</h4>
			</div>
		</th:block>	
	</th:block>

	<!-- Batterie-Warnung -->
	<th:block th:fragment="deviceBatterieWarning (model)">
		<th:block th:if="${#lists.size(model) &gt; 0}">
			<div th:replace="~{fragments :: title (name='Bitte beachten:')}"></div>
		</th:block>
		<th:block th:each="entry : ${model}">
			<div th:class="'alert alert-warning callout callout-warning classHomeWarning'">
				<h4>
					<span><th:block th:replace="~{basics :: symbol (name='fas fa-battery-quarter')}"/></span> <span
						th:text="'Batterie fast leer: ' + ${entry}"></span>
				</h4>
			</div>
		</th:block>	
	</th:block>

	<!-- ViewCorrelations -->
	<th:block th:fragment="viewCorrelations (model)">
		<th:block th:each="entry : ${model}">
			<input type="hidden" th:id="'viewCorrelation_' + ${entry.from}" th:value="${entry.to}" />
		</th:block>
	</th:block>
	
	<!-- Chart Entry -->
	<th:block th:fragment="chartEntry (chart, showCaption)">	
		<th:block th:if="${#strings.equals(showCaption,'true')}">
			<a th:class="${chart.collapse} + ' text-decoration-none'">
				<span class="mb-1" th:text="${chart.label}">Gestern</span>
				<span>&nbsp;</span>
				<span class="text-secondary" style="font-size: 80%;" th:text="${chart.additionalLabel}">Summe</span>
			</a>
		</th:block>
		<div th:class="'progress' + ${chart.collapse}" style="margin-bottom: 10px !important; margin-top: 4px !important">
			<th:block th:each="valueWithCaption : ${chart.valuesWithCaptions}">
				<div th:class="'progress-bar' + ${valueWithCaption.cssClass}" role="progressbar" th:style="'width: ' + ${valueWithCaption.value} + '%;'" th:aria-valuenow="${valueWithCaption.value}" aria-valuemin="0" aria-valuemax="100" th:text="${valueWithCaption.caption}"></div> 
			</th:block>
		</div>	
	</th:block>

	<!-- Presence -->
	<div th:fragment="presence (model)" th:class="'alert alert-' + ${model.colorClass} + ' callout callout-' + ${model.colorClass}">
		<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name=${model.name}, place=${model.place}, unreach=${model.unreach}, collapseLink='collapse' + ${model.id}, elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
		<th:block th:unless="${#strings.equals(model.unreach,'true')}">
			<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id}">
				<h4 th:text="${model.state}"></h4>
			</div>
		</th:block>
	</div>

	<!-- HeatpumpRoof -->
	<div th:fragment="heatpumpRoof (model)" th:class="'alert alert-secondary callout callout-' + ${model.colorClass}">
		<div th:replace="~{fragments :: elementnameCollapsable (icon=${model.icon}, name=${model.name}, place=${model.place}, unreach=${model.unreach}, collapseLink='collapse' + ${model.id}, elementTitleState=${model.elementTitleState}, colorClass=${model.colorClass})}"></div>
		<div class="collapse collapse-preserve-state" th:id="'collapse' + ${model.id}">

			<th:block th:unless="${#strings.equals(model.busy,'true')}">

				<h4><span th:text="${model.state}"></span><span th:text="${model.stateSuffix}" style="font-size: 80%;"></span></h4>

				<div class="pt-1"></div>

				<div th:classappend="${model.stateUnknown || model.unreach} ? 'd-none' : ''">
					<div class="form-check pl-0" style="opacity: 0.6; padding-left: 0 !important;">
						<input class="form-check-input checkbox-preserve-state" type="checkbox" th:id="'idChkHeatpump_' + ${model.placeID} + '_self'" value="true" checked disabled>
						<label class="btn btn-sm p-0 mb-0" th:for="'idChkHeatpump_' + ${model.placeID} + '_self'">
							<i class="fa-solid fa-square fa-2x text-secondary check-false"></i><i class="fa-solid fa-square-check fa-2x text-warning check-true"></i><span th:text="' ' + ${model.placeSubtitle}"></span>
						</label>
					</div>

					<th:block th:each="entry : ${model.otherPlaces}">
						<div class="form-check pl-0" style="padding-left: 0 !important;">
							<input class="form-check-input checkbox-preserve-state" type="checkbox" th:name="'heatpumpAddPlaceFor_' + ${model.id}" th:id="'idChkHeatpumpFrom_' + ${model.placeID} + '_for_' + ${entry.value}" value="true" th:alt="${entry.value}">
							<label class="btn btn-sm p-0 mb-0" th:for="'idChkHeatpumpFrom_' + ${model.placeID} + '_for_' + ${entry.value}">
								<i class="fa-solid fa-square fa-2x text-secondary check-false"></i><i class="fa-solid fa-square-plus fa-2x text-warning check-true"></i><span th:text="' ' + ${entry.caption}"></span>
							</label>
						</div>
					</th:block>
				</div>

				<div class="pt-1"></div>
				<div th:if="${!model.stateUnknown}">
					<div>
						<div class="btn-group prefixbutton" role="group" aria-label="heatpump-group-cool-auto-prefix">
							<a style="font-size: 1.3rem;"><th:block th:replace="~{basics :: symbol (name='fa-solid fa-snowflake')}"/></a>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-cool-auto">
							<button type="button" th:class="${#strings.startsWith(model.linkCoolAuto, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkCoolAuto} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkCoolAuto, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fas fa-cogs')}"/>
								</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-cool-min">
							<button type="button" th:class="${#strings.startsWith(model.linkCoolMin, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkCoolMin} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkCoolMin, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-bed')}"/>
								</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-cool-timer1">
							<button type="button" th:class="${#strings.startsWith(model.linkCoolTimer1, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkCoolTimer1} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkCoolTimer1, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-hourglass-end')}"/>
								</span>
								<span th:class="${#strings.startsWith(model.linkCoolTimer1, '#')} ? 'text-' + ${model.activeSwitchColorClass}">60′</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-cool-timer2">
							<button type="button" th:class="${#strings.startsWith(model.linkCoolTimer2, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkCoolTimer2} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkCoolTimer2, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-hourglass-end')}"/>
								</span>
								<span th:class="${#strings.startsWith(model.linkCoolTimer2, '#')} ? 'text-' + ${model.activeSwitchColorClass}">120′</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-cool-timer3">
							<button type="button" th:class="${#strings.startsWith(model.linkCoolTimer3, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkCoolTimer3} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkCoolTimer3, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-clock')}"/>
								</span>
								<span th:class="${#strings.startsWith(model.linkCoolTimer3, '#')} ? 'text-' + ${model.activeSwitchColorClass}">19h</span>
							</button>
						</div>
					</div>

					<div>
						<div class="btn-group prefixbutton" role="group" aria-label="heatpump-group-heat-auto">
							<a style="font-size: 1.3rem;"><th:block th:replace="~{basics :: symbol (name='fa-solid fa-fire-flame-curved')}"/></a>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-heat-auto">
							<button type="button" th:class="${#strings.startsWith(model.linkHeatAuto, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkHeatAuto} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkHeatAuto, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fas fa-cogs')}"/>
								</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-heat-min">
							<button type="button" th:class="${#strings.startsWith(model.linkHeatMin, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkHeatMin} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkHeatMin, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-bed')}"/>
								</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-heat-timer1">
							<button type="button" th:class="${#strings.startsWith(model.linkHeatTimer1, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkHeatTimer1} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkHeatTimer1, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-hourglass-end')}"/>
								</span>
								<span th:class="${#strings.startsWith(model.linkHeatTimer1, '#')} ? 'text-' + ${model.activeSwitchColorClass}">60′</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-heat-timer2">
							<button type="button" th:class="${#strings.startsWith(model.linkHeatTimer2, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkHeatTimer2} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkHeatTimer2, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-hourglass-end')}"/>
								</span>
								<span th:class="${#strings.startsWith(model.linkHeatTimer2, '#')} ? 'text-' + ${model.activeSwitchColorClass}">120′</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-heat-timer3">
							<button type="button" th:class="${#strings.startsWith(model.linkHeatTimer3, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkHeatTimer3} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkHeatTimer3, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-clock')}"/>
								</span>
								<span th:class="${#strings.startsWith(model.linkHeatTimer3, '#')} ? 'text-' + ${model.activeSwitchColorClass}">13h</span>
							</button>
						</div>
					</div>

					<div>
						<div class="btn-group prefixbutton" role="group" aria-label="heatpump-group-fan-auto-prefix">
							<a style="font-size: 1.3rem;"><th:block th:replace="~{basics :: symbol (name='fa-solid fa-fan')}"/></a>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-fan-auto">
							<button type="button" th:class="${#strings.startsWith(model.linkFanAuto, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkFanAuto} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkFanAuto, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fas fa-cogs')}"/>
								</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-fan-min">
							<button type="button" th:class="${#strings.startsWith(model.linkFanMin, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkFanMin} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkFanMin, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-bed')}"/>
								</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-drytimer">
							<button type="button" th:class="${#strings.startsWith(model.linkDryTimer, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkDryTimer} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkDryTimer, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-hourglass-end')}"/>
								</span>
								<span th:class="${#strings.startsWith(model.linkDryTimer, '#')} ? 'text-' + ${model.activeSwitchColorClass}">20′</span>
							</button>
						</div>
					</div>

					<div>
						<div class="btn-group prefixbutton" role="group" aria-label="heatpump-group-off-prefix"></div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-off">
							<button type="button" th:class="${#strings.startsWith(model.linkOff, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkOff} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkOff, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fas fa-power-off')}"/>
								</span>
							</button>
						</div>
						<div class="btn-group widebutton" role="group" aria-label="heatpump-group-refresh">
							<button type="button" th:class="${#strings.startsWith(model.linkRefresh, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkRefresh} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkRefresh, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-rotate')}"/>
								</span>
							</button>
						</div>
					</div>
				</div>
				<div th:if="${model.stateUnknown}">
					<div class="btn-group widebutton" role="group" aria-label="heatpump-group-refresh">
						<button type="button" th:class="${#strings.startsWith(model.linkRefresh, '#')} ? 'btn btn-dark btn-sm btn-block' : 'btn btn-secondary btn-sm btn-block'" th:onclick="@{'heatpump(\''+ ${model.id} +'\', \'' + ${model.placeID} + '\', \'' + ${model.linkRefresh} + '\')'}">
								<span th:class="${#strings.startsWith(model.linkRefresh, '#')} ? 'text-' + ${model.activeSwitchColorClass}">
									<th:block th:replace="~{basics :: symbol (name='fa-solid fa-rotate')}"/>
								</span>
						</button>
					</div>
				</div>

			</th:block>

			<th:block th:if="${#strings.equals(model.busy,'true')}">
				<h4><span><th:block th:replace="~{basics :: symbol (name='fa fa-spinner fa-spin')}"/></span></h4>
			</th:block>
		</div>
	</div>

</body>
</html>